<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
  const fillEmail = () => {
    const url = location.href;
    const completeParam = (url.split("token="))[1];
    const paramList = (completeParam.split("&email="));
    const token = paramList[0];
    const email = paramList[1];
    document.getElementById('email').value = email;
    document.getElementById('token').value = token;
  }
  
  const resetPassword = () => {
    url = "http://localhost:5500/auth/forgotpass";
              axios.post(url, {
                
                  token: document.getElementById('token').value,
                  email: document.getElementById('email').value,
                  newPassword:document.getElementById('password').value
                
              }).then(res => {
                alert("Password changed. Log in with new password");
                //redirect to login page
              })
  }
</script>
</head>
<body onload="fillEmail()">
    <div class="form-group">
        <input
          type="email"
          name="email"
          id="email"
          class="form-control"
          placeholder="Email"
          
        />
    </div>
    
    <div class="form-group">
        <input
          type="password"
          name="password"
          id="password"
          class="form-control"
          placeholder="password"
        />
    </div>
    <input
    type="hidden"
    name="token"
    id="token"
    />
<button type="submit" class="btn btn-primary btn-block" onClick="resetPassword()">
        Set New Password
      </button>
</body>
</html>